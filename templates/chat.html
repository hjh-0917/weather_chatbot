<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>옷 코디 챗봇</title>
  <style>
    body { font-family: sans-serif; }
    #chat-box { width: 90%; height: 400px; border: 1px solid #ccc; overflow-y: scroll; margin: 20px auto; padding: 10px; }
    #user-input { width: 80%; padding: 10px; }
    button { padding: 10px; }
  </style>
</head>
<body>
  <h2>{{ character }} 챗봇과 대화</h2>
  <div id="chat-box"></div>
  <div style="text-align: center;">
    <form id="chat-form">
      <input type="text" id="user-input" placeholder="메시지를 입력하세요" required>
      <button type="submit">보내기</button>
    </form>
  </div>
  <script>
    const form = document.getElementById("chat-form");
    const input = document.getElementById("user-input");
    const chatBox = document.getElementById("chat-box");

    function addMessage(sender, text) {
      const div = document.createElement("div");
      div.textContent = sender + ": " + text;
      chatBox.appendChild(div);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    form.onsubmit = async (e) => {
      e.preventDefault();
      const msg = input.value;
      addMessage("You", msg);
      input.value = "";
      const res = await fetch("/chat", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: "message=" + encodeURIComponent(msg)
      });
      const text = await res.text();
      addMessage("Bot", text);
    }
  </script>
</body>
</html>

